;"use strict";if(!window.console)window.console={};if(!window.console.log)window.console.log=function(){};if(!window.console.info)window.console.info=function(){};if(!window.console.warn)window.console.warn=function(){};if(!window.console.error)window.console.error=function(){};if(!window.console.assert)window.console.assert=function(bTest,sMessage){};console.log("Loading jquery-easolutions-1.2.2.js.");var g_JQueryEASolutions_oES5={Object:{},Array:{prototype:{}}};g_JQueryEASolutions_oES5.Object.keys=function(obj){if((obj==null)||((typeof obj)!="object"))throw new TypeError("Argument is not an object.");var result=[];if(obj.constructor.toString().indexOf("Array")>0){for(var idx=0;idx<obj.length;idx++){if(idx in obj)result.push(idx)}}else{if(obj.constructor&&obj.constructor.prototype){for(var prop in obj)if((prop in obj)&&(!(prop in obj.constructor.prototype)))result.push(prop)}else{for(var prop in obj)if(prop in obj)result.push(prop)}}return result}if(!Object.keys)Object.keys=g_JQueryEASolutions_oES5.Object.keys;g_JQueryEASolutions_oES5.Array.prototype.forEach=function(fnCallback,oThis){if((typeof fnCallback)!="function")throw new TypeError("First argument is not callable.");var self=this,len=self.length;for(var idx=0;idx<len;idx++){if(idx in self)fnCallback.call(oThis,self[idx],idx,self)}}if(!Array.prototype.forEach)Array.prototype.forEach=g_JQueryEASolutions_oES5.Array.prototype.forEach;g_JQueryEASolutions_oES5.Array.prototype.forEachUntil=function(fnCallback,oThis){if((typeof fnCallback)!="function")throw new TypeError("First argument is not callable.");var self=this,len=self.length,result=false;for(var idx=0;idx<len;idx++){if(idx in self){if(true===fnCallback.call(oThis,self[idx],idx,self)){result=true;break}}}return result}if(!Array.prototype.forEachUntil)Array.prototype.forEachUntil=g_JQueryEASolutions_oES5.Array.prototype.forEachUntil;g_JQueryEASolutions_oES5.Array.prototype.every=function(fnCallback,oThis){if((typeof fnCallback)!="function")throw new TypeError("First argument is not callable.");var self=this,len=self.length,result=true;for(var idx=0;idx<len;idx++){if(idx in self){if(!fnCallback.call(oThis,self[idx],idx,self)){result=false;break}}}return result}if(!Array.prototype.forEachUntil)Array.prototype.every=g_JQueryEASolutions_oES5.Array.prototype.every;g_JQueryEASolutions_oES5.Array.prototype.indexOf=function(item){var self=this,len=self.length,result=(-1);for(var idx=0;idx<len;idx++){if(item==self[idx]){result=idx;break}}return result}if(!Array.prototype.indexOf)Array.prototype.indexOf=g_JQueryEASolutions_oES5.Array.prototype.indexOf;g_JQueryEASolutions_oES5.Array.prototype.lastIndexOf=function(item){var self=this,len=self.length,result=(-1);for(var idx=(len-1);idx>=0;idx--){if(item==self[idx]){result=idx;break}}return result}if(!Array.prototype.indexOf)Array.prototype.lastIndexOf=g_JQueryEASolutions_oES5.Array.prototype.lastIndexOf;g_JQueryEASolutions_oES5.Array.prototype.reduce=function reduce(fnAccumulator,oInitialValue){if((typeof fnAccumulator)!=="function")throw new TypeError("First argument is not callable.");var self=this,iStart=0,len=self.length,result;if(arguments.length<2){if((len==0)||(len===null))throw new TypeError("Array length is 0 and no second argument");result=self[0];iStart=1}else{result=oInitialValue}for(var idx=iStart;idx<len;++idx){if(idx in self)result=fnAccumulator.call(undefined,result,self[idx],idx,self)}return result}if(!Array.prototype.reduce)Array.prototype.reduce=g_JQueryEASolutions_oES5.Array.prototype.reduce;g_JQueryEASolutions_oES5.Array.prototype.filter=function(fnCallback,oThis){if((typeof fnCallback)!=="function")throw new TypeError("First argument is not callable.");var self=this,len=self.length,item,result=[];for(var idx=0;idx<len;idx++){if(idx in self){item=self[idx];if(fnCallback.call(oThis,item,idx,self))result.push(item)}}return result}if(!Array.prototype.filter)Array.prototype.filter=g_JQueryEASolutions_oES5.Array.prototype.filter;g_JQueryEASolutions_oES5.Array.prototype.peek=function(oDefault){if(this.length<=0)return oDefault;return this[this.length-1]}if(!Array.prototype.peek)Array.prototype.peek=g_JQueryEASolutions_oES5.Array.prototype.peek;g_JQueryEASolutions_oES5.Array.prototype.isEmpty=function(){return(this.length<=0)}if(!Array.prototype.isEmpty)Array.prototype.isEmpty=g_JQueryEASolutions_oES5.Array.prototype.isEmpty;g_JQueryEASolutions_oES5.Array.isArray=function(obj){return(obj&&((typeof obj)=="object")&&(obj.constructor.toString().indexOf("Array")>0))?true:false}if(!Array.isArray)Array.isArray=g_JQueryEASolutions_oES5.Array.isArray;String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}String.prototype.ltrim=function(){return this.replace(/^\s+/,"")}String.prototype.rtrim=function(){return this.replace(/\s+$/,"")}String.prototype.contains=function(str){return(((typeof str)=="string")?(this.indexOf(str)>=0):false)}String.prototype.startsWith=function(str){if((typeof str)!="string")return false;if(this.length<str.length)return false;return(this.substr(0,str.length)==str)?true:false}String.prototype.endsWith=function(str){if((typeof str)!="string")return false;var idx=this.length-str.length;if(idx<0)return false;return(this.substr(idx)==str)?true:false}String.prototype.removePrefix=function(str){if((typeof str)!="string")return this.toString();if(this.length<str.length)return this.toString();return(this.substr(0,str.length)==str)?this.substr(str.length):this.toString()}String.prototype.removeSuffix=function(str){if((typeof str)!="string")return this.toString();var idx=this.length-str.length;if(idx<0)return this.toString();return(this.substr(idx)==str)?this.substr(0,idx):this.toString()}String.prototype.beforeFirst=function(str,sDefault){if((typeof str)!="string")return((typeof sDefault)=="undefined")?this.toString():sDefault;var idx=this.indexOf(str);if(idx<0)return((typeof sDefault)=="undefined")?this.toString():sDefault;return this.substr(0,idx)}String.prototype.afterFirst=function(str,sDefault){if((typeof str)!="string")return((typeof sDefault)=="undefined")?this.toString():sDefault;var idx=this.indexOf(str);if(idx<0)return((typeof sDefault)=="undefined")?this.toString():sDefault;return this.substr(idx+str.length)}String.prototype.beforeLast=function(str,sDefault){if((typeof str)!="string")return((typeof sDefault)=="undefined")?this.toString():sDefault;var idx=this.lastIndexOf(str);if(idx<0)return((typeof sDefault)=="undefined")?this.toString():sDefault;return this.substr(0,idx)}String.prototype.afterLast=function(str,sDefault){if((typeof str)!="string")return((typeof sDefault)=="undefined")?this.toString():sDefault;var idx=this.lastIndexOf(str);if(idx<0)return((typeof sDefault)=="undefined")?this.toString():sDefault;return this.substr(idx+str.length)};var g_JQueryEASolutions=(function($){$.EHTMLNodeTypes={Element:1,Attribute:2,Text:3,Comment:8,Document:9}$.isDefined=function(o){return((typeof o)!="undefined")}$.isUndefined=function(o){return((typeof o)=="undefined")}$.isNothing=function(o){return((typeof o)=="undefined")||(o==null)}$.isObject=function(o){return(o!=null)&&((typeof o)=="object")&&(!$.isArray(o))}$.isString=function(o){return((typeof o)=="string")}$.isBlank=function(o,bTrim){if($.isNothing(o))return true;if($.isString(o)){if($.isUndefined(bTrim))bTrim=true;if(bTrim)o=o.rtrim();if(o==="")return true}return false}$.asString=function(oVal,sDefault){var sResult=sDefault;try{if(!$.isNothing(oVal))sResult=oVal.toString()}catch(err){sResult=sDefault}return sResult}$.asInt=function(oVal,iDefault){if($.isArray(oVal))return iDefault;var fResult=parseFloat(oVal);return(!isNaN(fResult)&&isFinite(fResult))?Math.round(fResult):iDefault}$.asFloat=function(oVal,fDefault){if($.isArray(oVal))return fDefault;var fResult=parseFloat(oVal);return(!isNaN(fResult)&&isFinite(fResult))?fResult:fDefault}$.asBool=function(oVal,bDefault){var bResult=bDefault?true:false;switch(typeof oVal){case"boolean":bResult=oVal;break;default:var iResult=$.asInt(oVal,NaN);if(isNaN(iResult)){try{switch($.asString(oVal,"").ltrim().substr(0,1).toLowerCase()){case"t":case"y":bResult=true;break;case"f":case"n":bResult=false;break}}catch(err){}}else{bResult=(iResult!=0)}break}return bResult}var m_iStartTime=(new Date()).getTime();$.TimeStamp=function(){return((new Date()).getTime())-m_iStartTime}$.HasTimedOut=function(iStart,iMaxMilliseconds){return(iMaxMilliseconds<($.TimeStamp()-iStart))}function parsedURL(url){var self=this;self._url=url||window.location.href;if(self._url){var sp=self._url.trim().afterFirst("?",null);if(!$.isBlank(sp)){sp=decodeURI(sp.replace(/&amp;/ig,"§"));var ap=sp.split("&");ap.forEach(function(item,idx){item=item.replace("§","&");var sName=item.beforeFirst("=",null);if(sName)self[sName]=item.afterFirst("=")})}}return self}parsedURL.prototype.hasParam=function(sName){return $.isDefined(this[sName])}parsedURL.prototype.asString=function(sName,sDefault){return $.asString(this[sName],sDefault)}parsedURL.prototype.asInt=function(sName,iDefault){return $.asInt(this[sName],iDefault)}parsedURL.prototype.asFloat=function(sName,fDefault){return $.asFloat(this[sName],iDefault)}parsedURL.prototype.asBool=function(sName,bDefault){return $.asBool(this[sName],bDefault)}$.parseURL=function(url){return new parsedURL(url)}var _LastID=0;$.NextID=function(){return++_LastID}$.StringStringify=function(obj){return'"'+obj.toString().replace(/\\/g,'\\\\').replace(/"/g,'\\"')+'"'}$.JSONstringify=function(obj){var p="",r="",idx=0,item;switch(typeof obj){case"undefined":r="undefined";break;case"number":case"boolean":r=obj.toString();break;case"string":r=$.StringStringify(obj);break;case"object":if(obj==null){r="null"}else{if(Array.isArray(obj)){if(obj.length<=0){r="[]"}else{var max=obj.length;p="";r="[ ";for(idx=0;idx<max;idx++){r+=p+$.JSONstringify(obj[idx]);p=", "}r+=" ]"}}else{p="";r="{ ";if(obj.constructor&&obj.constructor.prototype){for(item in obj){if((item in obj)&&(!(item in obj.constructor.prototype))){r+=p+$.StringStringify(item)+': '+$.JSONstringify(obj[item]);p=", "}}}else{for(item in obj){if(item in obj){r+=p+$.StringStringify(item)+': '+$.JSONstringify(obj[item]);p=", "}}}r+=" }"}}break;case"function":r=obj.toString();break;default:r=$.StringStringify(obj);break}return r}$.DebugStringify=function(obj,iLevel,oOptions){iLevel=$.asInt(iLevel,1);options={maxStringLength:32,maxArrayLength:16};$.extend(options,oOptions);var p="";var r="";var idx=0;switch(typeof obj){case"number":case"boolean":r=obj.toString();break;case"string":if(obj.length<=options.maxStringLength){r="'"+obj.toString().replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"}else{r="'"+obj.substr(0,options.maxStringLength).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"...'"}break;case"object":if(obj==null){r="null"}else{if(Array.isArray(obj)){if(iLevel<1){r="Array("+obj.length+")"}else if(obj.length<=0){r="[]"}else{var max=Math.min(options.maxArrayLength,obj.length);p="";r="[ ";for(idx=0;idx<max;idx++){r+=p+$.DebugStringify(obj[idx],iLevel-1,options);p=", "}if(options.maxArrayLength<obj.length){r+="...<<of Array("+obj.length+")>>...]"}else{r+=" ]"}}}else{if(iLevel<1){r=(typeof obj)}else{p="";r="{ ";for(var item in obj){r+=p+item+": "+$.DebugStringify(obj[item],iLevel-1,options);p=", "}r+=" }"}}}break;case"function":switch(obj.name){case"observable":var val=obj.call();r="observable("+$.DebugStringify(val,iLevel-1,options)+")";break;default:r=(typeof obj);break}break;default:r=(typeof obj);break}return r}function _makeSparceArray(arr){var len=arr.length;for(var idx=0;idx<len;idx++){if((idx in arr)&&($.isUndefined(arr[idx])))delete arr[idx]}}function _evalObjectArrays(obj){if($.isObject(obj)){for(var key in obj){if($.isArray(obj[key]))_makeSparceArray(obj[key])}}}$._JSONParseEval=null;$.JSONparse=function(sJSON,oOptions){var opt={errMessage:"Error evaluating JSON string",context:this,throwError:true,evalSparceArrays:true};$.extend(opt,oOptions);var oResult=null;if($.isBlank(sJSON))return oResult;try{sJSON=$.trim(sJSON);var schar=sJSON.substr(0,1);if((sJSON!="null")&&(schar!="{")&&(schar!="["))sJSON="{ "+sJSON+" }";var sExp="jQuery._JSONParseEval = function() { return "+sJSON+"; }";eval(sExp);oResult=$._JSONParseEval.call(opt.context);if(opt.evalSparceArrays)_evalObjectArrays(oResult)}catch(err){oResult=null;if(opt.throwError)throw opt.errMessage+", "+err.toString()+": "+sJSON}return oResult}$.Dictionary=function(){this._data={};this.length=0;return this}$.Dictionary.prototype.add=function(sKey,oItem){if(!this._data[sKey]){this._data[sKey]=[];this.length++}if(0>this._data[sKey].indexOf(oItem))this._data[sKey].push(oItem);return this}$.Dictionary.prototype.remove=function(sKey,oItem){if($.isUndefined(oItem)){if(this._data[sKey]){delete this._data[sKey];this.length--}return this}if(this._data[sKey]){this._data[sKey]=this._data[sKey].filter(function(item,idx){return item!==oItem});if(this._data[sKey].length<=0){delete this._data[sKey];this.length--}}return this}$.Dictionary.prototype.containsKey=function(sKey){return $.isDefined(this._data[sKey])}$.Dictionary.prototype.list=function(sKey){return this._data[sKey]||[]}$.Dictionary.prototype.each=function(oFunc){for(var sKey in this._data){oFunc.call(this,sKey,this._data[sKey])}}$.Dictionary.prototype.eachUntil=function(oFunc){var bResult=false;for(var sKey in this._data){if(oFunc.call(this,sKey,this._data[sKey])===true){bResult=true;break}}return bResult}$.EventLocker=function(iTimeout){this._lastEventTime=(-9999);this._timeOut=$.asInt(iTimeout,300);if(this._timeOut<=0)this._timeOut=300;return this}$.EventLocker.prototype.isLocked=function(iTimeout){return $.HasTimedOut(this._lastEventTime,iTimeout||this._timeOut)?false:true}$.EventLocker.prototype.setLock=function(iTimeout){var bResult=false;if(!this.isLocked(iTimeout)){bResult=true;this._lastEventTime=$.TimeStamp()}return bResult}$.EventLocker.prototype.setLockForce=function(iTimeout){var bResult=!this.isLocked(iTimeout);this._lastEventTime=$.TimeStamp();return bResult}$.EventLocker.prototype.unlock=function(iTimeout){var bResult=this.isLocked(iTimeout);this._lastEventTime=(-9999);return bResult}$.applyPluginSingleton=function(jqObject,oPlugin,args){var cmdArgs,sCommand="init";if($.isNothing(args)||(args.length<=0)){cmdArgs=[jqObject]}else if($.isString(args[0])){sCommand=args[0];if($.isBlank(sCommand))sCommand="init";cmdArgs=Array.prototype.slice.call(args,0);cmdArgs[0]=jqObject}else{cmdArgs=Array.prototype.slice.call(args,0);cmdArgs.unshift(jqObject)}var method=oPlugin[sCommand];if(!$.isFunction(method)){if($.isDefined(oPlugin.error)){oPlugin.error("commandError",sCommand)}else{var name=$.isString(oPlugin.name)?oPlugin.name:oPlugin.constructor.toString();$.error(name+': Command '+sCommand+' does not exist on '+name)}return jqObject}cmdArgs=Array.prototype.slice.call(args,0);cmdArgs[0]=jqObject;return method.apply(oPlugin,cmdArgs)}$.applyPluginHandler=function(jqObject,sName,fnCreator,args){var cmdArgs,sCommand=null;if($.isNothing(args)||(args.length<=0)){cmdArgs=[null]}else if($.isString(args[0])){sCommand=args[0];if($.isBlank(sCommand))sCommand=null;cmdArgs=Array.prototype.slice.call(args,0)}else{cmdArgs=Array.prototype.slice.call(args,0);cmdArgs.unshift(null)}jqObject.each(function(idx){var oPlugin=$.data(this,sName);if($.isNothing(oPlugin)){oPlugin={};cmdArgs[0]=this;oPlugin=fnCreator.apply(oPlugin,cmdArgs);$.data(this,sName,oPlugin)}if(sCommand!=null){var method=oPlugin[sCommand];if($.isFunction(method)){cmdArgs[0]=this;method.apply(oPlugin,cmdArgs)}else{if($.isDefined(oPlugin.error)){oPlugin.error("commandError",sCommand)}else{var name=$.isString(oPlugin.name)?oPlugin.name:oPlugin.constructor.toString();$.error(name+': Command '+sCommand+' does not exist on '+name)}}}});return jqObject}$.fn.firstItem=function(){return(this.length>0)?this[0]:null}$.fn.lastItem=function(){return(this.length>0)?this[this.length-1]:null}$.fn.isChecked=function(){return this.is(':checked')}$.fn.setChecked=function(bValue){return this.prop('checked',bValue?true:false)}$.fn.tableSort=function(oOptions){if(!oOptions)return this;this.filter("TABLE").each(function(idx){var jqTable=$(this);var oStatus={orderByInput:null,submitForm:null,jqTable:jqTable,aoOrderBy:[],orderByInstance:function(sFieldOrderBy){var sFieldName=sFieldOrderBy.beforeLast(" ");var sAsc=sFieldOrderBy.afterLast(" ");var bAsc=(sAsc.toLowerCase()=="desc")?false:true;this.FieldName=sFieldName;this.Ascending=bAsc;this.AsString=function(){return this.FieldName+(this.Ascending?" ASC":" DESC")}return this},onOrderBy:function(ev,jqTH,sOrderBy){},_init:function(){var self=this;var asOrderBy=[];var sOrderBy=$(self.orderByInput).val();if(sOrderBy)asOrderBy=sOrderBy.split(",");self.aoOrderBy=[];asOrderBy.forEach(function(item,idx){self.aoOrderBy.push(new self.orderByInstance(item))})},_onOrderBy:function(ev,jqTH,sOrderBy){var self=this;var oOrderBy=new self.orderByInstance(sOrderBy);if((self.aoOrderBy.length>0)&&(self.aoOrderBy[0].FieldName==oOrderBy.FieldName)){self.aoOrderBy[0].Ascending=(!self.aoOrderBy[0].Ascending)}else{self.aoOrderBy=self.aoOrderBy.filter(function(item){return item.FieldName!=oOrderBy.FieldName});self.aoOrderBy.unshift(oOrderBy)}sOrderBy=self.aoOrderBy.reduce(function(prev,cur,idx){return((prev=="")?prev:prev+",")+cur.AsString()},"");$(self.orderByInput).val(sOrderBy);$(self.submitForm).submit();self.onOrderBy(ev,jqTH,sOrderBy)}}$.extend(oStatus,oOptions);jqTable[0].tableSortStatus=oStatus;oStatus._init();jqTable.find("TH[orderby]").each(function(idx){$(this).addClass("sorting");$(this).click(function(ev){ev.preventDefault();oStatus._onOrderBy(ev,$(this),$(this).attr("orderby"))})})});return this}$.fn.layoutBox=function(){var oResult={marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,borderTop:0,borderBottom:0,borderLeft:0,borderRight:0,paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0,boxTop:0,boxBottom:0,boxLeft:0,boxRight:0};if(this.length<=0)return oResult;if(this[0]===window)return oResult;var borderWidth=$.asInt(this.css("border-width"),0);$.extend(oResult,{marginTop:$.asInt(this.css("margin-top"),0),marginBottom:$.asInt(this.css("margin-bottom"),0),marginLeft:$.asInt(this.css("margin-left"),0),marginRight:$.asInt(this.css("margin-right"),0),borderTop:borderWidth,borderBottom:borderWidth,borderLeft:borderWidth,borderRight:borderWidth,paddingTop:$.asInt(this.css("padding-top"),0),paddingBottom:$.asInt(this.css("padding-bottom"),0),paddingLeft:$.asInt(this.css("padding-left"),0),paddingRight:$.asInt(this.css("padding-right"),0)});$.extend(oResult,{boxTop:oResult.marginTop+oResult.borderTop+oResult.paddingTop,boxBottom:oResult.marginBottom+oResult.borderBottom+oResult.paddingBottom,boxLeft:oResult.marginLeft+oResult.borderLeft+oResult.paddingLeft,boxRight:oResult.marginRight+oResult.borderRight+oResult.paddingRight});return oResult}$.fn.sizeControl=function(oOptions){var jqElement=this;if(jqElement.length<=0)return this;var oStatus={jqElement:jqElement,percentWidth:0,percentHeight:0,container:jqElement.parent(),rightElement:null,rightMargin:0,bottomElement:null,bottomMargin:0,OnWindowResize:function(ev){return true},_onWindowResize:function(ev){var self=this;var oCss={};var oPos=self.jqElement.offset();var oContainerPos=$(self.container).offset();var oContainerBox=$(self.container).layoutBox();if(self.percentWidth>0){var iRightWidth=self.rightElement?$(self.rightElement).outerWidth():0;var iMarginWidth=self.jqElement.outerWidth()-self.jqElement.width();var iContainerLeft=oContainerPos?oContainerPos.left:0;oCss.width=(((iContainerLeft+oContainerBox.boxLeft+$(self.container).width())-(oPos.left+iRightWidth+iMarginWidth+self.rightMargin))*(self.percentWidth/100))+"px"}if(self.percentHeight>0){var iBottomHeight=self.bottomElement?$(self.bottomElement).outerHeight():0;var iMarginHeight=self.jqElement.outerHeight()-self.jqElement.height();var iContainerTop=oContainerPos?oContainerPos.top:0;oCss.height=(((iContainerTop+oContainerBox.boxTop+$(self.container).height())-(oPos.top+iBottomHeight+iMarginHeight+self.bottomMargin))*(self.percentHeight/100))+"px"}if(self.OnWindowResize({status:oStatus,event:ev,css:oCss}))self.jqElement.css(oCss);return true}};$.extend(oStatus,oOptions);if((oStatus.percentWidth>0)||(oStatus.percentHeight>0)){$(window).bind('resize.sizeControl',function(){return oStatus._onWindowResize(event)});oStatus._onWindowResize(null)}return this}function emptyTextInput(oElement,oOptions){var self=this;self.name="emptyTextInput";console.log("emptyTextInput: %s",oElement.name);self.status={EmptyText:'search keyword',EmptyClass:null,jqElement:$(oElement),hasFocus:false,hasEmptyText:false};$.extend(self.status,oOptions);var jqElement=self.status.jqElement;try{var sOptions=jqElement.attr(self.name);if(!$.isBlank(sOptions))$.extend(self.status,$.JSONparse(sOptions))}catch(err){}if($.isBlank(self.status.EmptyClass))self.status.EmptyClass=null;var sValue=jqElement.val();if($.isBlank(sValue)||(sValue==self.status.EmptyText)){jqElement.val(self.status.EmptyText);self.status.hasEmptyText=true;if(self.status.EmptyClass)jqElement.addClass(self.status.EmptyClass)}else{self.status.hasEmptyText=false;if(self.status.EmptyClass)jqElement.removeClass(self.status.EmptyClass)}self._onfocus=function(){console.log("emptyTextInput._onfocus: %s",this.name);if(self.status.hasEmptyText&&(this.value==self.status.EmptyText)){this.value="";self.status.hasEmptyText=false}if(self.status.EmptyClass)$(this).removeClass(self.status.EmptyClass);self.status.hasFocus=true;return true}jqElement.bind("focus",self._onfocus);self._onblur=function(){console.log("emptyTextInput._onblur: %s",this.name);if(this.value==""){this.value=self.status.EmptyText;self.status.hasEmptyText=true;if(self.status.EmptyClass)$(this).addClass(self.status.EmptyClass)}self.status.hasFocus=false;return true}jqElement.bind("blur",self._onblur);return self}$.fn.emptyTextInput=function(oOptions){return $.applyPluginHandler(this.filter("input:text"),"emptyTextInput",emptyTextInput,arguments)}function setFocusHandler(jqElements,oOptions){this.tryCount=0;this.maxTry=10;this.intervalWait=500;this.jqElements=jqElements;this.onFocus=null;this.onError=null;this.oElement=null;$.extend(this,oOptions);this._setFocus();return this}setFocusHandler.prototype._onFocus=function(ev){var el=ev.srcElement;el.hasFocus=true;return true}setFocusHandler.prototype._onBlur=function(ev){var el=ev.srcElement;el.hasFocus=false;return true}setFocusHandler.prototype.hasFocus=function(){return(this.oElement&&$.isUndefined(this.oElement.hasFocus))?this.oElement.hasFocus:false}setFocusHandler.prototype._setFocus=function(oOptions){var self=this;self.tryCount+=1;if(!self.oElement){self.oElement=$(self.jqElements).firstItem();if(!self.oElement){if(self.tryCount<=self.maxTry){setTimeout(function(){self._setFocus()},100)}else{if(self.onError)self.onError(self)}return false}self.tryCount=0}if($.isUndefined(self.oElement.hasFocus)){self.oElement.hasFocus=false;self.oElement.addEventListener('focus',_onFocus,false);self.oElement.addEventListener('blur',_onBlur,false)}if(self.tryCount<=self.maxTry){if(!self.oElement.hasFocus){self.oElement.focus();setTimeout(function(){self._setFocus()},self.intervalWait);return false}else{if(self.onFocus)self.onFocus(self);return true}}else{if(self.oElement.hasFocus){if(self.onFocus)self.onFocus(self);return true}else{if(self.onError)self.onError(self);return false}}}$.fn.setFocus=function(oOptions){var oHandler=new setFocusHandler(this,oOptions);if($.isObject(oOptions)&&$.isDefined(oOptions.handler))oOptions.handler=oHandler;return this}var tocControlMethods={name:"jQuery.tocControl",_sTocControlStatus:"_tocControlStatus",_sTocControlClass:"ea-toc-control",_bTocInit:true,_oEventLock:null,init:function(jqObj,oOptions){var self=this;var oStatus={createStyles:true,nodeClosedClass:"ea-toc-closed",nodeOpenClass:"ea-toc-open",nodeBulletClass:"ea-toc-bullet",nodeSelectedClass:"ea-toc-selected",nodeImageClass:"ea-toc-image",textWrapClass:"ea-toc-text",openImageClass:"ui-icon-triangle-1-se",closeImageClass:"ui-icon-triangle-1-e",bulletImageClass:"ui-icon-bullet"};$.extend(oStatus,oOptions);oStatus.allImageClasses=oStatus.openImageClass+" "+oStatus.closeImageClass+" "+oStatus.bulletImageClass;if(self._bTocInit){self._bTocInit=false;self._oEventLock=new $.EventLocker(500);if(oStatus.createStyles){var jqRef=$("head");if(jqRef.length<=0)jqRef=$(document.body);jqRef.prepend('<style id="ea-toc-control-css" type="text/css">\n'+'   ul.'+self._sTocControlClass+' { list-style-type: none; }\n'+'   ul.'+self._sTocControlClass+' ul { list-style-type: none; }\n'+'   ul.'+self._sTocControlClass+' li span.'+oStatus.nodeImageClass+' { cursor:pointer; }\n'+'   ul.'+self._sTocControlClass+' li span.'+oStatus.textWrapClass+' { cursor:pointer; }\n'+'   ul.'+self._sTocControlClass+' li.'+oStatus.nodeClosedClass+' ul { display:none; }\n'+'</style>\n')}}jqObj.filter("ul").each(function(idxTree){var jqUL=$(this);if(jqUL.parents("ul."+self._sTocControlClass).length<=0){jqUL.addClass(self._sTocControlClass).data(self._sTocControlStatus,oStatus);jqUL.find("ul").removeClass(self._sTocControlClass);jqUL.find("li").contents().wrap(function(idx){return(this.nodeType==$.EHTMLNodeTypes.Text)?'<span class="'+oStatus.textWrapClass+'" />':''});jqUL.find("li."+oStatus.nodeSelectedClass+":gt(0)").removeClass(oStatus.nodeSelectedClass);if(jqUL.find("li."+oStatus.nodeSelectedClass).length<=0)jqUL.find("li:first").addClass(oStatus.nodeSelectedClass);jqUL.find("li").prepend("<span class='ui-icon "+oStatus.nodeImageClass+" "+oStatus.bulletImageClass+"' style='display:inline;'>&nbsp;&nbsp;&nbsp;&nbsp;</span>");jqUL.find("li:not(."+oStatus.nodeOpenClass+", ."+oStatus.nodeClosedClass+"):has(ul)").removeClass(oStatus.nodeBulletClass).addClass(oStatus.nodeClosedClass);jqUL.find("li:not(."+oStatus.nodeOpenClass+", ."+oStatus.nodeClosedClass+", ."+oStatus.nodeBulletClass+")").addClass(oStatus.nodeBulletClass);jqUL.find("li."+oStatus.nodeClosedClass).has("li."+oStatus.nodeOpenClass).removeClass(oStatus.nodeClosedClass).addClass(oStatus.nodeOpenClass);jqUL.find("li."+oStatus.nodeOpenClass).children("."+oStatus.nodeImageClass).removeClass(oStatus.allImageClasses).addClass(oStatus.openImageClass);jqUL.find("li."+oStatus.nodeClosedClass).children("."+oStatus.nodeImageClass).removeClass(oStatus.allImageClasses).addClass(oStatus.closeImageClass);jqUL.on("click","li."+oStatus.nodeOpenClass+" > span."+oStatus.nodeImageClass,function(ev){$(this).tocControl($.tocControlCommands.close,ev)});jqUL.on("click","li."+oStatus.nodeClosedClass+" > span."+oStatus.nodeImageClass,function(ev){$(this).tocControl($.tocControlCommands.open,ev)});jqUL.on("click","li",function(ev){$(this).tocControl($.tocControlCommands.selected,ev)})}});return jqObj},error:function(sError,sText){switch(sError){case"commandError":$.error('jQuery.tocControl: Command '+sText+' does not exist on jQuery.tocControl');break;default:$.error('jQuery.tocControl: Unknown error: '+sError);break}},open:function(jqObj,ev){var self=this;if(self._oEventLock.setLock()){$(jqObj).each(function(idx){var oStatus=$(this).parents("ul."+self._sTocControlClass+":first").data(self._sTocControlStatus);if(oStatus){var jqLI=$(this).filter("li");if(jqLI.length<=0)jqLI=$(this).parents("li:first");console.log("tocControl.open: %s",jqLI.text());jqLI.removeClass(oStatus.nodeClosedClass).addClass(oStatus.nodeOpenClass).children("."+oStatus.nodeImageClass).removeClass(oStatus.allImageClasses).addClass(oStatus.openImageClass)}})}return true},close:function(jqObj,ev){var self=this;if(self._oEventLock.setLock()){$(jqObj).each(function(idx){var oStatus=$(this).parents("ul."+self._sTocControlClass+":first").data(self._sTocControlStatus);if(oStatus){var jqLI=$(this).filter("li");if(jqLI.length<=0)jqLI=$(this).parents("li:first");console.log("tocControl.close: %s",jqLI.text());jqLI.removeClass(oStatus.nodeOpenClass).addClass(oStatus.nodeClosedClass).children("."+oStatus.nodeImageClass).removeClass(oStatus.allImageClasses).addClass(oStatus.closeImageClass)}})}return true},toggle:function(jqObj,ev){var self=this;if(self._oEventLock.setLock()){$(jqObj).each(function(idx){var oStatus=$(this).parents("ul."+self._sTocControlClass+":first").data(self._sTocControlStatus);if(oStatus){var jqLI=$(this).filter("li");if(jqLI.length<=0)jqLI=$(this).parents("li");if(jqLI.hasClass(oStatus.nodeOpenClass)){jqLI.removeClass(oStatus.nodeOpenClass).addClass(oStatus.nodeClosedClass).children("."+oStatus.nodeImageClass).removeClass(oStatus.allImageClasses).addClass(oStatus.closeImageClass)}else{jqLI.removeClass(oStatus.nodeClosedClass).addClass(oStatus.nodeOpenClass).children("."+oStatus.nodeImageClass).removeClass(oStatus.allImageClasses).addClass(oStatus.openImageClass)}}})}return true},selected:function(jqObj,ev){var self=this;if(!self._oEventLock.isLocked()){var jqLI=$(jqObj).first().filter("li");if(jqLI.length<=0)jqLI=$(jqObj).parents("li").first();var oStatus=$(jqObj).parents("ul."+self._sTocControlClass+":first").data(self._sTocControlStatus);if(oStatus){setTimeout(function(){if(self._oEventLock.setLock()){jqLI.parents("ul."+self._sTocControlClass).find("li."+oStatus.nodeSelectedClass).not(jqLI).removeClass(oStatus.nodeSelectedClass);jqLI.addClass(oStatus.nodeSelectedClass)}})}}return true}}$.tocControlCommands={};for(var item in tocControlMethods)$.tocControlCommands[item]=item;$.fn.tocControl=function(sCommand){return $.applyPluginSingleton(this,tocControlMethods,arguments)}return $}).call(jQuery,jQuery);$(function(){function valign(jqEl,options){var status={type:"center",resize:false,margins:[50,50]};if($.isString(options)){status.type=options}else if($.isObject(options)){$.extend(status,options)}status.jqEl=jqEl;switch(status.type){case"top":status.margins=[0,100];break;case"center":case"middle":status.margins=[50,50];break;case"bottom":status.margins=[100,0];break}function valignHandler(){var height=status.jqEl.height();var parentHeight=status.jqEl.parent().height();var diff=parentHeight-height;status.jqEl.css({marginTop:(diff*status.margins[0]/100).toString()+"px",marginBottom:(diff*status.margins[1]/100).toString()+"px"})}if(status.resize)jqEl.bind({resize:valignHandler});valignHandler()}function halign(jqEl,options){var status={jqEl:jqEl,type:"center",resize:false,margins:[50,50]};if($.isString(options)){status.type=options}else if($.isObject(options)){$.extend(status,options)}switch(status.type){case"left":status.margins=[0,100];break;case"center":case"middle":status.margins=[50,50];break;case"right":status.margins=[100,0];break}function halignHandler(){var width=status.jqEl.width();var parentWidth=status.jqEl.parent().width();var diff=parentWidth-width;status.jqEl.css({marginLeft:(diff*status.margins[0]/100).toString()+"px",marginRight:(diff*status.margins[1]/100).toString()+"px"})}if(status.resize)jqEl.bind({resize:halignHandler});halignHandler()}$("[ea-ext]").each(function(){var jqEl=$(this);var options=$.JSONparse(jqEl.attr("ea-ext"),{errMessage:"Error evaluating attribute 'ea-ext'"});for(var item in options){switch(item){case"verticalAlign":valign(jqEl,options[item]);break;case"horizontalAlign":halign(jqEl,options[item]);break}}})});